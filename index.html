<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=615badd5">
    <link rel="stylesheet" href="http://ricostacruz.com/docpress-rsc/style.css">
    <script src="assets/script.js?t=36f3d457"></script>
    <title>scour.js</title>
    <meta name="viewport" content="width=device-width">
    <script>if (false || window.location.hostname.indexOf("ricostacruz.com") === window.location.hostname.length - 15) {
        (function(d,o,c,p,r,e,s){d['GoogleAnalyticsObject']=r;d[r]=d[r]||function(){(d[r].q=d[r].q||[]).push(arguments)},d[r].l=1*new Date();e=o.createElement(c),s=o.getElementsByTagName(c)[0];e.async=1;e.src=p;s.parentNode.insertBefore(e,s)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create',"UA-20473929-1",'auto')
      }
    </script>
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a class="link title -active link-index" href="index.html">scour.js</a>
            </li>
            <li class="menu-item -level-1"><a class="link title link-end-of-life" href="#end-of-life">End-of-life</a>
            </li>
            <li class="menu-item -level-1"><a class="link title link-install" href="#install">Install</a>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-features" href="#features">Features</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-traversal" href="#traversal">Traversal</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-chaining" href="#chaining">Chaining</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-immutable-modifications" href="#immutable-modifications">Immutable modifications</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-advanced-traversing" href="#advanced-traversing">Advanced traversing</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-models" href="#models">Models</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-api" href="#api">API</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-scour" href="#scour">scour</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-chaining-methods" href="#chaining-methods">Chaining methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-go" href="#go">go</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-at" href="#at">at</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-getat" href="#getat">getAt</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-filter" href="#filter">filter</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-reject" href="#reject">reject</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-find" href="#find">find</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-first" href="#first">first</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-last" href="#last">last</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-sortby" href="#sortby">sortBy</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-reading-methods" href="#reading-methods">Reading methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-get" href="#get">get</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-len" href="#len">len</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-toarray" href="#toarray">toArray</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-keys" href="#keys">keys</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-writing-methods" href="#writing-methods">Writing methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-set" href="#set">set</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-del" href="#del">del</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-extend" href="#extend">extend</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-utility-methods" href="#utility-methods">Utility methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-use" href="#use">use</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-index" href="#index">index</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-tojson" href="#tojson">toJSON</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-equal" href="#equal">equal</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-iteration-methods" href="#iteration-methods">Iteration methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-foreach" href="#foreach">forEach</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-each" href="#each">each</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-map" href="#map">map</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-mapobject" href="#mapobject">mapObject</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-indexedmap" href="#indexedmap">indexedMap</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-reset" href="#reset">reset</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-attributes" href="#attributes">Attributes</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-value" href="#value">value</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-root" href="#root">root</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-keypath" href="#keypath">keypath</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a class="link title link-utility-functions" href="#utility-functions">Utility functions</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title link-scour.get" href="#scour.get">scour.get</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.set" href="#scour.set">scour.set</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.del" href="#scour.del">scour.del</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.extendin" href="#scour.extendin">scour.extendIn</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.each" href="#scour.each">scour.each</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.map" href="#scour.map">scour.map</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.mapobject" href="#scour.mapobject">scour.mapObject</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.indexedmap" href="#scour.indexedmap">scour.indexedMap</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.filter" href="#scour.filter">scour.filter</a>
                </li>
                <li class="menu-item -level-2"><a class="link title link-scour.sortby" href="#scour.sortby">scour.sortBy</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><a class="link title link-thanks" href="#thanks">Thanks</a>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Appendix</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-history" href="HISTORY.html">Changelog</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-comparison" href="comparison.html">Comparison with others</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-extensions_example" href="extensions_example.html">Extensions example</a>
                </li>
                <li class="menu-item -level-2"><a class="link title  link-redux_example" href="redux_example.html">Redux example</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
      <div class="body page-index">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/rstacruz/scour" data-title="rstacruz/scour">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><blockquote>
<h2 id="end-of-life">End-of-life</h2>
<p>July 2020: Thank you to all the users and contributors who have made this project possible. Moving forward, please consider alternatives such as <a href="https://www.npmjs.com/package/immer">immer</a>.</p>
</blockquote>
<hr>
<h1 class="massive-header -with-tagline" id="scour.js">scour.js</h1>
<blockquote>
<p>Traverse objects and arrays immutably</p>
</blockquote>
<p>Scour is a general-purpose library for dealing with JSON trees.<br>
As a simple utility with a broad purpose, it can be used to solve many problems. Use it to:</p>
<ul>
<li>Manage your <a href="http://rackt.github.io/redux">Redux</a> datastore.</li>
<li>Provide a model layer to access data in your single-page app. <a href="#models">&#x2192;</a></li>
<li>Navigate a large JSON tree easily.</li>
<li>Rejoice in having a lightweight alternative to <a href="http://facebook.github.io/immutable-js/">Immutable.js</a>. (<a href="comparison.html">Compare</a>)</li>
</ul>
<p><a href="https://travis-ci.org/rstacruz/scour" title="See test builds"><img src="https://travis-ci.org/rstacruz/scour.svg?branch=master" alt="Status"></a></p>
<h2 id="install">Install</h2>
<pre><code class="lang-sh">npm install --save-exact scourjs
</code></pre>
<pre><code class="lang-js"><span class="pl-c1">window</span>.scour                       <span class="pl-c">// non commonjs</span>
<span class="pl-k">const</span> scour = <span class="pl-c1">require</span>(<span class="pl-s">&apos;scourjs&apos;</span>)   <span class="pl-c">// commonjs/node</span>
<span class="pl-k">import</span> scour <span class="pl-k">from</span> <span class="pl-s">&apos;scourjs&apos;</span>        <span class="pl-c">// es6 modules</span>
</code></pre>
<h2 id="features">Features</h2>
<p>Calling <code>scour(object)</code> returns a wrapper that you can use to traverse <code>object</code>.
Use <a href="#get">get()</a> to retrieve values.</p>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-number">1</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;john&apos;</span> },
      <span class="hljs-number">2</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;shane&apos;</span>, <span class="hljs-attr">confirmed</span>: <span class="pl-c1">true</span> },
      <span class="hljs-number">3</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;barry&apos;</span>, <span class="hljs-attr">confirmed</span>: <span class="pl-c1">true</span> } } }
</code></pre>
<pre><code class="lang-js">scour(data).get(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;1&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)   <span class="pl-c">// =&gt; &apos;john&apos;</span>
</code></pre>
<br>
<h3 id="traversal">Traversal</h3>
<p>Use <a href="#go">go()</a> to dig into the structure. It will return another <code>scour</code>
wrapper scoped to that object.</p>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-attr">admins</span>:
      { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">logged_in</span>: <span class="pl-c1">true</span> },
        <span class="hljs-attr">sue</span>: { <span class="hljs-attr">logged_in</span>: <span class="pl-c1">false</span> } } } }
</code></pre>
<pre><code class="lang-js">users  = scour(data).go(<span class="pl-s">&apos;users&apos;</span>)            <span class="pl-c">// =&gt; [scour (admins)]</span>
admins = scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;admins&apos;</span>)  <span class="pl-c">// =&gt; [scour (bob, sue)]</span>

admins.go(<span class="pl-s">&apos;bob&apos;</span>).get(<span class="pl-s">&apos;logged_in&apos;</span>)           <span class="pl-c">// =&gt; true</span>
</code></pre>
<br>
<h3 id="chaining">Chaining</h3>
<p><code>scour()</code> provides a wrapper that can be used to chain methods. This is inspired by <a href="http://underscorejs.org/">Underscore</a> and <a href="http://lodash.com/">Lodash</a>.</p>
<pre><code class="lang-js">scour(data)
  .go(<span class="pl-s">&apos;users&apos;</span>)
  .filter({ <span class="hljs-attr">admin</span>: <span class="pl-c1">true</span> })
  .value
</code></pre>
<br>
<h3 id="immutable-modifications">Immutable modifications</h3>
<p>Use <a href="#set">set()</a> to update values. Scout treats all data as immutable, so this
doesn&#x2019;t modify your original <code>data</code>, but gets you a new one with the
modifications made.</p>
<pre><code class="lang-js">data = scour(data)
  .set([<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;1&apos;</span>, <span class="pl-s">&apos;updated_at&apos;</span>], +<span class="pl-k">new</span> <span class="pl-c1">Date</span>())
  .value

<span class="pl-c">// =&gt; { users:</span>
<span class="pl-c">//      { 1: { name: &apos;john&apos;, updated_at: 1450667171188 },</span>
<span class="pl-c">//        2: { name: &apos;shane&apos;, confirmed: true },</span>
<span class="pl-c">//        3: { name: &apos;barry&apos;, confirmed: true } } }</span>
</code></pre>
<br>
<h3 id="advanced-traversing">Advanced traversing</h3>
<p>Use <a href="#filter">filter()</a> to filter results with advanced querying.</p>
<pre><code class="lang-js">users = scour(data).go(<span class="pl-s">&apos;users&apos;</span>)

users
  .filter({ <span class="hljs-attr">confirmed</span>: <span class="pl-c1">true</span> })
  .at(<span class="hljs-number">0</span>)
  .get(<span class="pl-s">&apos;name&apos;</span>)   <span class="pl-c">// =&gt; &apos;shane&apos;</span>
</code></pre>
<br>
<h3 id="models">Models</h3>
<p>Use <a href="#use">use()</a> to add your own methods to certain keypaths. This makes them behave like models.<br>
See <a href="extensions_example.html">a detailed example</a> to learn more.</p>
<h5 class="file-heading" id="sample-data">Sample data</h5>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">artists</span>:
    { <span class="hljs-number">1</span>: { <span class="hljs-attr">first_name</span>: <span class="pl-s">&apos;Louie&apos;</span>, <span class="hljs-attr">last_name</span>: <span class="pl-s">&apos;Armstrong&apos;</span> },
      <span class="hljs-number">2</span>: { <span class="hljs-attr">first_name</span>: <span class="pl-s">&apos;Miles&apos;</span>, <span class="hljs-attr">last_name</span>: <span class="pl-s">&apos;Davis&apos;</span> } } }
</code></pre>
<h5 class="file-heading" id="your-models">Your models</h5>
<pre><code class="lang-js">Root = {
  artists () { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;artists&apos;</span>) }
}

Artist = {
  fullname () {
    <span class="pl-k">return</span> <span class="pl-k">this</span>.get(<span class="pl-s">&apos;first_name&apos;</span>) + <span class="pl-s">&apos; &apos;</span> + <span class="pl-k">this</span>.get(<span class="pl-s">&apos;last_name&apos;</span>)
  }
}
</code></pre>
<h5 class="file-heading" id="using-with-scour">Using with scour</h5>
<pre><code class="lang-js">db = scour(data)
  .use({
    <span class="pl-s">&apos;&apos;</span>: Root,
    <span class="pl-s">&apos;artists.*&apos;</span>: Artist
  })

db.artists().find({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Miles&apos;</span> }).fullname()
<span class="pl-c">//=&gt; &apos;Miles Davis&apos;</span>
</code></pre>
<br>
<h2 id="api">API</h2>
<!--api-->
<h3 id="scour">scour</h3>
<blockquote>
<p><code>scour(object)</code></p>
</blockquote>
<p>Returns a scour instance wrapping <code>object</code>.</p>
<pre><code class="lang-js">scour(obj)
</code></pre>
<p>It can be called on any Object or Array. (In fact, it can be called on
anything, but is only generally useful for Objects and Arrays.)</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">menu</span>: { <span class="hljs-attr">visible</span>: <span class="pl-c1">true</span>, <span class="hljs-attr">position</span>: <span class="pl-s">&apos;left&apos;</span> } }
scour(data).get(<span class="pl-s">&apos;menu.visible&apos;</span>)

list = [ { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">12</span> } ]
scour(list).get(<span class="pl-s">&apos;0.id&apos;</span>)
</code></pre>
<p><strong>Chaining</strong>:
You can use it to start method chains. In fact, the intended use is to keep
your root <a href="#scour">scour</a> object around, and chain from this.</p>
<pre><code class="lang-js">db = scour({ <span class="hljs-attr">menu</span>: { <span class="hljs-attr">visible</span>: <span class="pl-c1">true</span>, <span class="hljs-attr">position</span>: <span class="pl-s">&apos;left&apos;</span> } })

<span class="pl-c">// Elsewhere:</span>
menu = db.go(<span class="pl-s">&apos;menu&apos;</span>)
menu.get(<span class="pl-s">&apos;visible&apos;</span>)
</code></pre>
<p><strong>Properties</strong>:
It the <a href="#root">root</a>, <a href="#value">value</a> and <a href="#keypath">keypath</a> properties.</p>
<pre><code class="lang-js">s = scour(obj)
s.root             <span class="pl-c">// =&gt; [scour object]</span>
s.value            <span class="pl-c">// =&gt; raw data (that is, `obj`)</span>
s.keypath          <span class="pl-c">// =&gt; string array</span>
</code></pre>
<p><strong>Accessing the value:</strong>
You can access the raw data using <a href="#value">value</a>.</p>
<pre><code class="lang-js">db = scour(data)
db.value               <span class="pl-c">// =&gt; same as `data`</span>
db.go(<span class="pl-s">&apos;users&apos;</span>).value   <span class="pl-c">// =&gt; same as `data.users`</span>
</code></pre>
<h2 id="chaining-methods">Chaining methods</h2>
<p>These methods are used to traverse nested structures. All these
methods return <a href="#scour">scour</a> instances, making them suitable for chaining.</p>
<h4 id="on-null-values">On null values</h4>
<p>Note that <code>undefined</code>, <code>false</code> and <code>null</code> values are still <a href="#scour">scour</a>-wrapped
when returned from <a href="#go">go()</a>, <a href="#at">at()</a> and [find()].</p>
<pre><code class="lang-js">list = [ { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Homer&apos;</span> }, { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Bart&apos;</span> } ]

scour(list).at(<span class="hljs-number">4</span>)         <span class="pl-c">// =&gt; [ scour undefined ]</span>
scour(list).at(<span class="hljs-number">4</span>).value   <span class="pl-c">// =&gt; undefined</span>
</code></pre>
<p>This is done so that you can chain methods safely even when something is null.
This behavior is consistent with what you&#x2019;d expect with jQuery.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { ... } }
db = scour(data)

db.go(<span class="pl-s">&apos;blogposts&apos;</span>).map(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span> post.get(<span class="pl-s">&apos;title&apos;</span>))
<span class="pl-c">// =&gt; []</span>
</code></pre>
<h3 id="go">go</h3>
<blockquote>
<p><code>go(keypath...)</code></p>
</blockquote>
<p>Navigates down to a given <code>keypath</code>. Always returns a <a href="#scour">scour</a> instance.
Rules <a href="#on-null-values">on null values</a> apply.</p>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span>, <span class="hljs-attr">last</span>: <span class="pl-s">&apos;jobs&apos;</span> },
      <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span>, <span class="hljs-attr">last</span>: <span class="pl-s">&apos;gates&apos;</span> } } }

scour(data).go(<span class="pl-s">&apos;users&apos;</span>)                    <span class="pl-c">// =&gt; [scour (users)]</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>)              <span class="pl-c">// =&gt; [scour (name, last)]</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>).get(<span class="pl-s">&apos;name&apos;</span>)  <span class="pl-c">// =&gt; &apos;steve&apos;</span>
</code></pre>
<p><strong>Dot notation:</strong>
Keypaths can be given in dot notation or as an array. These statements are
equivalent.</p>
<pre><code class="lang-js">scour(data).go(<span class="pl-s">&apos;users.12&apos;</span>)
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>)
scour(data).go([<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>])
</code></pre>
<p><strong>Non-objects:</strong>
If you use it on a non-object or non-array value, it will still be
returned as a <a href="#scour">scour</a> instance. This is not likely what you want; use
<a href="#get">get()</a> instead.</p>
<pre><code class="lang-js">attr = scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)
attr           <span class="pl-c">// =&gt; [scour object]</span>
attr.value     <span class="pl-c">// =&gt; &apos;steve&apos;</span>
attr.keypath   <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;12&apos;, &apos;name&apos;]</span>
</code></pre>
<h3 id="at">at</h3>
<blockquote>
<p><code>at(index)</code></p>
</blockquote>
<p>Returns the item at <code>index</code>. This differs from <code>go</code> as this searches by
index, not by key. This returns a the raw value, unlike <a href="#getat">getAt()</a>. Rules
<a href="#on-null-values">on null values</a> apply.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } }

scour(users).at(<span class="hljs-number">0</span>)          <span class="pl-c">// =&gt; [scour { name: &apos;steve&apos; }]</span>
scour(users).get(<span class="hljs-number">12</span>)        <span class="pl-c">// =&gt; [scour { name: &apos;steve&apos; }]</span>
</code></pre>
<h3 id="getat">getAt</h3>
<blockquote>
<p><code>getAt(index)</code></p>
</blockquote>
<p>Returns the item at <code>index</code>. This differs from <code>get</code> as this searches by
index, not by key. This returns a the raw value, unlike <a href="#at">at()</a>.
<em>(Since v0.5)</em></p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } }

scour(users).at(<span class="hljs-number">0</span>)           <span class="pl-c">// =&gt; [scour { name: &apos;steve&apos; }]</span>
scour(users).getAt(<span class="hljs-number">0</span>)        <span class="pl-c">// =&gt; { name: &apos;steve&apos; }</span>
</code></pre>
<h3 id="filter">filter</h3>
<blockquote>
<p><code>filter(conditions)</code></p>
</blockquote>
<p>Sifts through the values and returns a set that matches given
<code>conditions</code>. Supports simple objects, MongoDB-style
queries, and functions.</p>
<pre><code class="lang-js">scour(data).filter({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Moe&apos;</span> })
scour(data).filter({ <span class="hljs-attr">name</span>: { <span class="hljs-attr">$in</span>: [<span class="pl-s">&apos;Larry&apos;</span>, <span class="pl-s">&apos;Curly&apos;</span>] })
scour(data).filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.get(<span class="pl-s">&apos;name&apos;</span>) === <span class="pl-s">&apos;Moe&apos;</span>)
</code></pre>
<p><strong>Filter by object:</strong>
If you pass an object as a condition, <code>filter()</code> will check if that object
coincides with the objects in the collection.</p>
<pre><code class="lang-js">scour(data).filter({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Moe&apos;</span> })
</code></pre>
<p><strong>Filter by function:</strong>
You may pass a function as a parameter. In this case, the <code>item</code> being
passed to the callback will be a <a href="#scour">scour</a>-wrapped object. The result
will also be a <a href="#scour">scour</a>-wrapped object, making it chainable.</p>
<pre><code class="lang-js">scour(data)
  .filter(<span class="hljs-function">(<span class="hljs-params">item, key</span>) =&gt;</span> +item.get(<span class="pl-s">&apos;price&apos;</span>) &gt; <span class="hljs-number">200</span>)
  .sortBy(<span class="pl-s">&apos;price&apos;</span>)
  .first()
</code></pre>
<p><strong>Advanced queries:</strong>
MongoDB-style queries are supported as provided by <a href="https://www.npmjs.com/package/sift">sift.js</a>.  For
reference, see <a href="https://docs.mongodb.org/manual/reference/operator/query/">MongoDB Query Operators</a>.</p>
<pre><code class="lang-js">scour(products).filter({ <span class="hljs-attr">price</span>: { <span class="hljs-attr">$gt</span>: <span class="hljs-number">200</span> })
scour(articles).filter({ <span class="hljs-attr">published_at</span>: { <span class="hljs-attr">$not</span>: <span class="pl-c1">null</span> }})
</code></pre>
<p><strong>Arrays or objects:</strong>
Both arrays and array-like objects are supported. In this example below,
an object will be used as the input.</p>
<pre><code class="lang-js">devices =
  { <span class="hljs-number">1</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Phone&apos;</span>, <span class="hljs-attr">mobile</span>: <span class="pl-c1">true</span> },
    <span class="hljs-number">2</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Tablet&apos;</span>, <span class="hljs-attr">mobile</span>: <span class="pl-c1">true</span> },
    <span class="hljs-number">3</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Desktop&apos;</span>, <span class="hljs-attr">mobile</span>: <span class="pl-c1">false</span> } }

scour(devices).filter({ <span class="hljs-attr">mobile</span>: <span class="pl-c1">true</span> }).len()
<span class="pl-c">// =&gt; 2</span>
</code></pre>
<p>Also see <a href="#scour-filter">scour.filter()</a> for the unwrapped version.</p>
<h3 id="reject">reject</h3>
<blockquote>
<p><code>reject(conditions)</code></p>
</blockquote>
<p>Inverse of <a href="#filter">filter()</a> &#x2013; see <code>filter()</code> documentation for details.</p>
<h3 id="find">find</h3>
<blockquote>
<p><code>find(conditions)</code></p>
</blockquote>
<p>Returns the first value that matches <code>conditions</code>.  Supports MongoDB-style
queries. For reference, see <a href="https://docs.mongodb.org/manual/reference/operator/query/">MongoDB Query Operators</a>. Also
see <a href="#filter">filter()</a>, as this is functionally-equivalent to the first result of
<code>filter()</code>. Rules <a href="#on-null-values">on null values</a> apply.</p>
<pre><code class="lang-js">scour(data).find({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;john&apos;</span> })
scour(data).find({ <span class="hljs-attr">name</span>: { <span class="hljs-attr">$in</span>: [<span class="pl-s">&apos;moe&apos;</span>, <span class="pl-s">&apos;larry&apos;</span>] })
</code></pre>
<h3 id="first">first</h3>
<blockquote>
<p><code>first()</code></p>
</blockquote>
<p>Returns the first result as a <a href="#scour">scour</a>-wrapped object. This is equivalent
to <a href="#at">at(0)</a>.</p>
<h3 id="last">last</h3>
<blockquote>
<p><code>last()</code></p>
</blockquote>
<p>Returns the first result as a <a href="#scour">scour</a>-wrapped object. This is equivalent
to <code>at(len() - 1)</code>: see <a href="#at">at()</a> and <a href="#len">len()</a>.</p>
<h3 id="sortby">sortBy</h3>
<blockquote>
<p><code>sortBy(condition)</code></p>
</blockquote>
<p>Sorts a collection. Returns a <a href="#scour">scour</a>-wrapped object suitable for
chaining. Like other chainable methods, this works on arrays as well as
objects. <em>(Since v0.8)</em></p>
<pre><code class="lang-js">data =
  { <span class="hljs-number">0</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Wilma&apos;</span> },
    <span class="hljs-number">1</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Barney&apos;</span> },
    <span class="hljs-number">2</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Fred&apos;</span> } }

scour(data).sortBy(<span class="pl-s">&apos;name&apos;</span>).value
<span class="pl-c">// { 1: { name: &apos;Barney&apos; },</span>
<span class="pl-c">//   2: { name: &apos;Fred&apos; },</span>
<span class="pl-c">//   0: { name: &apos;Wilma&apos; } }</span>
</code></pre>
<p><strong>Conditions:</strong>
The given condition can be a string or a function. When it&#x2019;s given as a
function, the <code>item</code> being passed is a <a href="#scour">scour</a>-wrapped object, just like
in <a href="#foreach">forEach()</a> (et al). These two examples below are
functionally-equivalent.</p>
<pre><code class="lang-js">scour(data).sortBy(<span class="pl-s">&apos;name&apos;</span>)
scour(data).sortBy(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.get(<span class="pl-s">&apos;name&apos;</span>))
</code></pre>
<p>You may also define nested keys in dot-notation:</p>
<pre><code class="lang-js">scour(data).sortBy(<span class="pl-s">&apos;user.name&apos;</span>)
</code></pre>
<h2 id="reading-methods">Reading methods</h2>
<p>For retrieving data.</p>
<h3 id="get">get</h3>
<blockquote>
<p><code>get(keypath...)</code></p>
</blockquote>
<p>Returns data in a given <code>keypath</code>.</p>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
      <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } } }

scour(data).get(<span class="pl-s">&apos;users&apos;</span>)       <span class="pl-c">// =&gt; same as data.users</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>).value  <span class="pl-c">// =&gt; same as data.users</span>
</code></pre>
<p><strong>Dot notation:</strong>
Like <a href="#go">go()</a>, the <code>keypath</code> can be given in dot notation.</p>
<pre><code class="lang-js">scour(data).get(<span class="pl-s">&apos;books.featured.name&apos;</span>)
scour(data).get(<span class="pl-s">&apos;books&apos;</span>, <span class="pl-s">&apos;featured&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)
</code></pre>
<h3 id="len">len</h3>
<blockquote>
<p><code>len()</code></p>
</blockquote>
<p>Returns the length of the object or array. For objects, it returns the
number of keys.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } }

names = scour(users).len()  <span class="pl-c">// =&gt; 2</span>
</code></pre>
<h3 id="toarray">toArray</h3>
<blockquote>
<p><code>toArray()</code></p>
</blockquote>
<p>Returns an array. If the the value is an object, it returns the values of
that object. If the value is an array, it returns it as is. Also aliased
as <code>values()</code>.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } }

names = scour(users).toArray()
<span class="pl-c">// =&gt; [ {name: &apos;steve&apos;}, {name: &apos;bill&apos;} ]</span>
</code></pre>
<h3 id="keys">keys</h3>
<blockquote>
<p><code>keys()</code></p>
</blockquote>
<p>Returns keys. If the value is an array, this returns the array&#x2019;s indices.
Also see <a href="#toarray">toArray()</a> to retrieve the values instead.</p>
<h2 id="writing-methods">Writing methods</h2>
<p>These are methods for modifying an object/array tree immutably.
Note that all these functions are immutable&#x2013;it will not modify existing
data, but rather spawn new objects with the modifications done on them.</p>
<h3 id="set">set</h3>
<blockquote>
<p><code>set(keypath, value)</code></p>
</blockquote>
<p>Sets values immutably. Returns a copy of the same object (<a href="#scour">scour</a>-wrapped)
with the modifications applied.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Bob&apos;</span> } }
db = scour(data)
db.set([ <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span> ], <span class="pl-s">&apos;Robert&apos;</span>)
<span class="pl-c">// db.value == { bob: { name: &apos;Robert&apos; } }</span>
</code></pre>
<p><strong>Immutability:</strong>
This is an immutable function, and will return a new object. It won&#x2019;t
modify your original object.</p>
<pre><code class="lang-js">profile = scour({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;John&apos;</span> })
profile2 = profile.set(<span class="pl-s">&apos;email&apos;</span>, <span class="pl-s">&apos;john@gmail.com&apos;</span>)

profile.value   <span class="pl-c">// =&gt; { name: &apos;John&apos; }</span>
profile2.value  <span class="pl-c">// =&gt; { name: &apos;John&apos;, email: &apos;john@gmail.com&apos; }</span>
</code></pre>
<p><strong>Using within a scope:</strong>
Be aware that using all writing methods (<a href="#set">set()</a>, <a href="#del">del()</a>, <a href="#extend">extend()</a>) on
scoped objects (ie, made with <a href="#go">go()</a>) will spawn a new <a href="#root">root</a> object. If
you&#x2019;re keeping a reference to the root object, you&#x2019;ll need to update it
accordingly.</p>
<pre><code class="lang-js">db = scour(data)
book = db.go(<span class="pl-s">&apos;book&apos;</span>)
book.root === db       <span class="pl-c">// correct so far</span>

book = book.set(<span class="pl-s">&apos;title&apos;</span>, <span class="pl-s">&apos;IQ84&apos;</span>)
book = book.del(<span class="pl-s">&apos;sale_price&apos;</span>)
book.root !== db      <span class="pl-c">// `root` has been updated</span>
</code></pre>
<p><strong>Dot notation:</strong>
Like <a href="#go">go()</a> and <a href="#get">get()</a>, the keypath can be given in dot notation or an
array.</p>
<pre><code class="lang-js">scour(data).set(<span class="pl-s">&apos;menu.left.visible&apos;</span>, <span class="pl-c1">true</span>)
scour(data).set([<span class="pl-s">&apos;menu&apos;</span>, <span class="pl-s">&apos;left&apos;</span>, <span class="pl-s">&apos;visible&apos;</span>], <span class="pl-c1">true</span>)
</code></pre>
<h3 id="del">del</h3>
<blockquote>
<p><code>del(keypath)</code></p>
</blockquote>
<p>Deletes values immutably. Returns a copy of the same object
(<a href="#scour">scour</a>-wrapped) with the modifications applied.</p>
<p>Like <a href="#set">set()</a>, the keypath can be given in dot notation or an
array.</p>
<pre><code class="lang-js">scour(data).del(<span class="pl-s">&apos;menu.left.visible&apos;</span>)
scour(data).del([<span class="pl-s">&apos;menu&apos;</span>, <span class="pl-s">&apos;left&apos;</span>, <span class="pl-s">&apos;visible&apos;</span>])
</code></pre>
<p>See <a href="#set">set()</a> for more information on working with immutables.</p>
<h3 id="extend">extend</h3>
<blockquote>
<p><code>extend(objects...)</code></p>
</blockquote>
<p>Extends the data with more values. Returns a <a href="#scour">scour</a>-wrapped object. Just
like <a href="https://devdocs.io/javascript/global_objects/object/assign">Object.assign</a>, you may pass multiple objects to the parameters.</p>
<pre><code class="lang-js">data  = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> }
data2 = scour(data).extend({ <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> })
</code></pre>
<pre><code class="lang-js">data2  <span class="pl-c">// =&gt; [scour { a: 1, b: 2, c: 3 }]</span>
data2.value   <span class="pl-c">// =&gt; { a: 1, b: 2, c: 3 }</span>
</code></pre>
<p>When used with anything non-object, it will be overridden.</p>
<pre><code class="lang-js">data = {}
db = scour(data)
db = db.go(<span class="pl-s">&apos;state&apos;</span>).extend({ <span class="hljs-attr">pressed</span>: <span class="pl-c1">true</span> }).root

db.value  <span class="pl-c">// =&gt; { state: { pressed: true } }</span>
</code></pre>
<p>See <a href="#set">set()</a> for more information on working with immutables.</p>
<h2 id="utility-methods">Utility methods</h2>
<p>For stuff.</p>
<h3 id="use">use</h3>
<blockquote>
<p><code>use(extensions)</code></p>
</blockquote>
<p>Extends functionality for certain keypaths with custom methods.
See <a href="extensions_example.html">Extensions example</a> for examples.</p>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span>, <span class="hljs-attr">surname</span>: <span class="pl-s">&apos;jobs&apos;</span> },
      <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span>, <span class="hljs-attr">surname</span>: <span class="pl-s">&apos;gates&apos;</span> } } }

extensions = {
  <span class="pl-s">&apos;users.*&apos;</span>: {
    fullname () {
      <span class="pl-k">return</span> <span class="pl-k">this</span>.get(<span class="pl-s">&apos;name&apos;</span>) + <span class="pl-s">&apos; &apos;</span> + <span class="pl-k">this</span>.get(<span class="pl-s">&apos;surname&apos;</span>)
    }
  }
}

scour(data)
  .use(extensions)
  .get(<span class="pl-s">&apos;users&apos;</span>, <span class="hljs-number">12</span>)
  .fullname()       <span class="pl-c">// =&gt; &apos;bill gates&apos;</span>
</code></pre>
<p><strong>Extensions format:</strong>
The parameter <code>extension</code> is an object, with keys being keypath globs, and
values being properties to be extended.</p>
<pre><code class="lang-js">.use({
  <span class="pl-s">&apos;books.*&apos;</span>: { ... },
  <span class="pl-s">&apos;authors.*&apos;</span>: { ... },
  <span class="pl-s">&apos;publishers.*&apos;</span>: { ... }
 })
</code></pre>
<p><strong>Extending root:</strong>
To bind properties to the root method, use an empty string as the keypath.</p>
<pre><code class="lang-js">.use({
  <span class="pl-s">&apos;&apos;</span>: {
    users() { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;users&apos;</span>) },
    authors() { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;authors&apos;</span>) }
  }
})
</code></pre>
<p><strong>Keypath filtering:</strong>
You can use glob-like <code>*</code> and <code>**</code> to match parts of a keypath. A <code>*</code> will
match any one segment, and <code>**</code> will match one or many segments. Here are
some examples:</p>
<ul>
<li><code>users.*</code> - will match <code>users.1</code>, but not <code>users.1.photos</code></li>
<li><code>users.**</code> - will match <code>users.1.photos</code></li>
<li><code>users.*.photos</code> - will match <code>users.1.photos</code></li>
<li><code>**</code> will match anything</li>
</ul>
<p><strong>When using outside root:</strong>
Any extensions in a scoped object (ie, made with <a href="#go">go()</a>) will be used relative
to it. For instance, if you define an extension to <code>admins.*</code> inside
<code>.go(&apos;users&apos;)</code>, it will affect `users.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { <span class="hljs-attr">john</span>: { } }
db = scour(data)

users = db.go(<span class="pl-s">&apos;users&apos;</span>)
  .use({ <span class="pl-s">&apos;*&apos;</span>: { hasName () { <span class="pl-k">return</span> !!<span class="pl-k">this</span>.get(<span class="pl-s">&apos;name&apos;</span>) } })

users.go(<span class="pl-s">&apos;john&apos;</span>).hasName()      <span class="pl-c">// works</span>
</code></pre>
<p>While this is supported, it is <em>not</em> recommended: these extensions will not
propagate back to the root, and any objects taken from the root will not
have those extensions applied to them.</p>
<pre><code class="lang-js">users.go(<span class="pl-s">&apos;john&apos;</span>).hasName()              <span class="pl-c">// works</span>
db.go(<span class="pl-s">&apos;users.john&apos;</span>).hasName()           <span class="pl-c">// doesn&apos;t work</span>
</code></pre>
<h3 id="index">index</h3>
<blockquote>
<p><code>index(keypath, field)</code></p>
</blockquote>
<p>Sets up indices to improve <a href="#filter">filter()</a> performance. <em>(Since v0.12)</em></p>
<ul>
<li><code>keypath</code> <em>(String | Array)</em> - the keypath of the collection.</li>
<li><code>field</code> <em>(String)</em> - the name of the field to be indexed.</li>
</ul>
<pre><code class="lang-js">data =
  { <span class="hljs-attr">users</span>:
    { <span class="hljs-number">1</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;John Creamer&apos;</span> },
      <span class="hljs-number">2</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Stephane K&apos;</span> } } }

db = scour(data).index(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)
db.filter({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Stephane K&apos;</span> })
</code></pre>
<p>Doing this will add an index in the root (acccessible via
<code>scour().indices</code>) to make searches faster for certain <a href="#filter">filter()</a> queries.
Any writing actions (<a href="#set">set()</a>, <a href="#extend">extend()</a>, <a href="#del">del()</a>) will automatically
update the index.</p>
<p>See <a href="https://github.com/rstacruz/scour-search">scour-search</a> for more information on indexing.</p>
<h3 id="tojson">toJSON</h3>
<blockquote>
<p><code>toJSON()</code></p>
</blockquote>
<p>Returns the value for serialization. This allows <code>JSON.stringify()</code> to
work with <code>scour</code>-wrapped objects. The name of this method is a bit
confusing, as it doesn&#x2019;t actually return a JSON string &#x2014; but I&#x2019;m afraid
that it&#x2019;s the way that the JavaScript API for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior">JSON.stringify</a> works.</p>
<h3 id="equal">equal</h3>
<blockquote>
<p><code>equal(other)</code></p>
</blockquote>
<p>Checks for equality between two Scour-wrapped objects.</p>
<pre><code class="lang-js">a = scour(data)
b = scour(data)

a.equal(b)   <span class="pl-c">// =&gt; true</span>
</code></pre>
<h2 id="iteration-methods">Iteration methods</h2>
<p>These methods are generally useful for collections. These
methods can work with either arrays or array-like objects, such as
below.</p>
<pre><code class="lang-js">subjects =
  { <span class="hljs-number">1</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="pl-s">&apos;Math&apos;</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">101</span> },
    <span class="hljs-number">2</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="pl-s">&apos;Science&apos;</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">103</span> },
    <span class="hljs-number">3</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">title</span>: <span class="pl-s">&apos;History&apos;</span>, <span class="hljs-attr">level</span>: <span class="hljs-number">102</span> } }
</code></pre>
<p><strong>Values:</strong>
For all these functions, The items passed onto the callbacks <em>is</em> a
<a href="#scour">scour</a>-wrapped object. Use <code>item.value</code> or <code>this</code> to access the raw
values.</p>
<pre><code class="lang-js">scour(subjects).forEach(<span class="hljs-function">(<span class="hljs-params">subject, key</span>) =&gt;</span> {
  <span class="pl-c1">console</span>.log(subject.get(<span class="pl-s">&apos;title&apos;</span>))
})
</code></pre>
<p><strong>Return values:</strong>
For methods that return values (such as <a href="#map">map()</a>, the returned results <em>is
not</em> a <a href="#scour">scour</a>-wrapped object, and isn&#x2019;t suitable for chaining.</p>
<pre><code class="lang-js">scour(subjects).map(<span class="hljs-function">(<span class="hljs-params">subject, key</span>) =&gt;</span> {
  <span class="pl-k">return</span> subject.get(<span class="pl-s">&apos;title&apos;</span>) + <span class="pl-s">&apos; &apos;</span> + subject.get(<span class="pl-s">&apos;level&apos;</span>)
})
<span class="pl-c">// =&gt; [ &apos;Math 101&apos;, &apos;Science 103&apos;, &apos;History 102&apos; ]</span>
</code></pre>
<h3 id="foreach">forEach</h3>
<blockquote>
<p><code>forEach(function(item, key, index))</code></p>
</blockquote>
<p>Loops through each item. Supports both arrays and objects.
The rules specified in <a href="#iteration-methods">Iteration methods</a> apply.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;bill&apos;</span> } }

scour(users).each(<span class="hljs-function">(<span class="hljs-params">user, key</span>) =&gt;</span> {
  <span class="pl-c1">console</span>.log(user.get(<span class="pl-s">&apos;name&apos;</span>))
})
</code></pre>
<p>The values passed onto the function are:</p>
<ul>
<li><code>item</code> - the value; always a scour object.</li>
<li><code>key</code> - the key.</li>
<li><code>index</code> - the index.</li>
</ul>
<h3 id="each">each</h3>
<blockquote>
<p><code>each(fn)</code></p>
</blockquote>
<p>Alias for <a href="#foreach">forEach</a>.</p>
<h3 id="map">map</h3>
<blockquote>
<p><code>map(function(item, key))</code></p>
</blockquote>
<p>Loops through each item and returns an array based on the iterator&#x2019;s
return values. Supports both arrays and objects.
The rules specified in <a href="#iteration-methods">Iteration methods</a> apply.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Steve&apos;</span> },
    <span class="hljs-number">23</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Bill&apos;</span> } }

names = scour(users).map(<span class="hljs-function">(<span class="hljs-params">user, key</span>) =&gt;</span> user.get(<span class="pl-s">&apos;name&apos;</span>))
<span class="pl-c">// =&gt; [ &apos;Steve&apos;, &apos;Bill&apos; ]</span>
</code></pre>
<h3 id="mapobject">mapObject</h3>
<blockquote>
<p><code>mapObject(function(val, key))</code></p>
</blockquote>
<p>Creates a new <code>Object</code> with with the results of calling a provided function
on every element in this array. Works like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>, but also works on
objects as well as arrays, and it returns an object instead.
The rules specified in <a href="#iteration-methods">Iteration methods</a> apply.</p>
<p>See <a href="#scour.mapobject">scour.mapObject()</a> for details and the non-wrapped version.</p>
<h3 id="indexedmap">indexedMap</h3>
<blockquote>
<p><code>indexedMap(function(val, key))</code></p>
</blockquote>
<p>Creates a new <code>Object</code> with with the results of calling a provided function
returning the keys and values for the new object.
The rules specified in <a href="#iteration-methods">Iteration methods</a> apply.</p>
<p>See <a href="#scour.indexedmap">scour.indexedMap()</a> for details and the non-wrapped version.</p>
<h3 id="reset">reset</h3>
<blockquote>
<p><code>reset(value, options)</code></p>
</blockquote>
<p>Returns a clone with the <code>value</code> replaced. The new instance will
retain the same properties, so things like <a href="#use">use()</a> extensions are carried
over.</p>
<pre><code class="lang-js">db = scour({ <span class="hljs-attr">name</span>: <span class="pl-s">&apos;hello&apos;</span> })
db.value  <span class="pl-c">//=&gt; { name: &apos;hello&apos; }</span>

db = db.reset({})
db.value  <span class="pl-c">// =&gt; {}</span>
</code></pre>
<p>This is useful for, say, using Scour with <a href="http://rackt.github.io/redux">Redux</a> and implementing an
action to reset the state back to empty.</p>
<h2 id="attributes">Attributes</h2>
<p>These attributes are available to <a href="#scour">scour</a> instances.</p>
<h3 id="value">value</h3>
<blockquote>
<p><code>value</code></p>
</blockquote>
<p>The raw value being wrapped. You can use this to terminate a chained call.</p>
<pre><code class="lang-js">users =
  [ { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;john&apos;</span>, <span class="hljs-attr">admin</span>: <span class="pl-c1">true</span> },
    { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;kyle&apos;</span>, <span class="hljs-attr">admin</span>: <span class="pl-c1">false</span> } ]

scour(users)
  .filter({ <span class="hljs-attr">admin</span>: <span class="pl-c1">true</span> })
  .value
<span class="pl-c">// =&gt; [ { name: &apos;john&apos;, admin: true } ]</span>
</code></pre>
<h3 id="root">root</h3>
<blockquote>
<p><code>root</code></p>
</blockquote>
<p>A reference to the root <a href="#scour">scour</a> instance.
Everytime you traverse using <a href="#go">go()</a>, a new <a href="#scour">scour</a> object is spawned that&#x2019;s
scoped to a keypath.  Each of these <a href="#scour">scour</a> objects have a <code>root</code> attribute
that&#x2019;s a reference to the top-level <a href="#scour">scour</a> object.</p>
<pre><code class="lang-js">db = scour(...)

photos = db.go(<span class="pl-s">&apos;photos&apos;</span>)
photos.root    <span class="pl-c">// =&gt; same as `db`</span>
</code></pre>
<p>This allows you to return to the root when needed.</p>
<pre><code class="lang-js">db = scour(...)
artist = db.go(<span class="pl-s">&apos;artists&apos;</span>, <span class="pl-s">&apos;9328&apos;</span>)
artist.root.go(<span class="pl-s">&apos;albums&apos;</span>).find({ <span class="hljs-attr">artist_id</span>: artist.get(<span class="pl-s">&apos;id&apos;</span>) })
</code></pre>
<h3 id="keypath">keypath</h3>
<blockquote>
<p><code>keypath</code></p>
</blockquote>
<p>An array of strings representing each step in how deep the current scope is
relative to the root. Each time you traverse using <a href="#go">go()</a>, a new <a href="#scour">scour</a>
object is spawned.</p>
<pre><code class="lang-js">db = scour(...)

users = db.go(<span class="pl-s">&apos;users&apos;</span>)
users.keypath            <span class="pl-c">// =&gt; [&apos;users&apos;]</span>

admins = users.go(<span class="pl-s">&apos;admins&apos;</span>)
admins.keypath           <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;admins&apos;]</span>

user = admins.go(<span class="pl-s">&apos;23&apos;</span>)
user.keypath             <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;admins&apos;, &apos;23&apos;]</span>
</code></pre>
<h2 id="utility-functions">Utility functions</h2>
<p>These are utilities that don&#x2019;t need a wrapped object.</p>
<h3 id="scour.get">scour.get</h3>
<blockquote>
<p><code>scour.get(object, keypath)</code></p>
</blockquote>
<p>Gets a keypath from an object.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;john&apos;</span> } } }

result = get(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span>])
<span class="pl-c">// =&gt; &apos;robert&apos;</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/get&apos;)</code>.</p>
<h3 id="scour.set">scour.set</h3>
<blockquote>
<p><code>scour.set(object, keypath, value)</code></p>
</blockquote>
<p>Sets a <code>keypath</code> into an <code>object</code> immutably.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;john&apos;</span> } } }

result = set(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span>], <span class="pl-s">&apos;robert&apos;</span>)
<span class="pl-c">// =&gt; { users: { bob: { name: &apos;robert&apos; } } }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/set&apos;)</code>.</p>
<h3 id="scour.del">scour.del</h3>
<blockquote>
<p><code>scour.del(object, keypath)</code></p>
</blockquote>
<p>Deletes a <code>keypath</code> from an <code>object</code> immutably.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;robert&apos;</span> } } }
result = del(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span>])

<span class="pl-c">// =&gt; { users: { bob: {} } }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/del&apos;)</code>.</p>
<h3 id="scour.extendin">scour.extendIn</h3>
<blockquote>
<p><code>scour.extendIn(object, keypath, extensions...)</code></p>
</blockquote>
<p>Extends a <code>keypath</code> from an <code>object</code> immutably.</p>
<pre><code class="lang-js">data = { <span class="hljs-attr">users</span>: { <span class="hljs-attr">bob</span>: { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;robert&apos;</span> } } }
result = extendIn(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>], { <span class="hljs-attr">email</span>: <span class="pl-s">&apos;bob@gmail.com&apos;</span> })

<span class="pl-c">// =&gt; { users: { bob: { name: &apos;robert&apos;, email: &apos;bob@gmail.com&apos; } } }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/extend_in&apos;)</code>.</p>
<h3 id="scour.each">scour.each</h3>
<blockquote>
<p><code>scour.each(iterable, fn)</code></p>
</blockquote>
<p>Iterates through <code>iterable</code>, either an object or an array. This is an
implementation of <a href="http://devdocs.io/javascript/global_objects/array/foreach">Array#forEach</a> that also works for objects. The callback
<code>fn</code> will be invoked with two parameters: <code>currentValue</code> and <code>key</code>, just
like <code>Array#forEach</code>.</p>
<p>This is also available as <code>require(&apos;scourjs/utilities/each&apos;)</code>.</p>
<h3 id="scour.map">scour.map</h3>
<blockquote>
<p><code>scour.map(iterable, fn)</code></p>
</blockquote>
<p>Creates a new <code>Array</code> with with the results of calling a provided function
on every element in this array. Works like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>, but also works on
objects as well as arrays.</p>
<p>The callback <code>fn</code> will be invoked with two parameters: <code>currentValue</code> and
<code>key</code>, just like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>.</p>
<p>This is also available as <code>require(&apos;scourjs/utilities/map&apos;)</code>.</p>
<h3 id="scour.mapobject">scour.mapObject</h3>
<blockquote>
<p><code>scour.mapObject(iterable, fn)</code></p>
</blockquote>
<p>Creates a new <code>Object</code> with with the results of calling a provided function
on every element in this array. Works like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>, but also works on
objects as well as arrays, and it returns an object instead.</p>
<p>The callback <code>fn</code> will be invoked with two parameters: <code>currentValue</code> and
<code>key</code>, just like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>.</p>
<pre><code class="lang-js">object = { <span class="hljs-attr">a</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">40</span> }
result = scour.mapObject(object, (val, key) =&gt; {
  <span class="pl-k">return</span> <span class="pl-s">&apos;$&apos;</span> + val + <span class="pl-s">&apos;.00&apos;</span>
})

<span class="pl-c">// =&gt; { a: &apos;$20.00&apos;, b: &apos;$30.00&apos;, c: &apos;$40.00&apos; }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/map_object&apos;)</code>.</p>
<h3 id="scour.indexedmap">scour.indexedMap</h3>
<blockquote>
<p><code>scour.indexedMap(iterable, fn)</code></p>
</blockquote>
<p>Creates a new <code>Object</code> with with the results of calling a provided function
returning the keys and values for the new object.</p>
<p>The callback <code>fn</code> will be invoked with two parameters: <code>currentValue</code> and
<code>key</code>, just like <a href="http://devdocs.io/javascript/global_objects/array/map">Array#map</a>.</p>
<p>The callback <code>fn</code> should return an array with two elements: with <code>result[0]</code>
being the key, and <code>result[1]</code> being the value. These are what the new
object will be constructed with.</p>
<p>The <code>iterable</code> parameter can be an object or an array. This works like
<code>Array#map</code>, but also works on objects as well as arrays.</p>
<pre><code class="lang-js">list = [<span class="pl-s">&apos;Fred&apos;</span>, <span class="pl-s">&apos;Barney&apos;</span>, <span class="pl-s">&apos;Wilma&apos;</span>]

object = scour.indexedMap(list, (val, key) =&gt; {
  <span class="pl-k">var</span> newkey = val.substr(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
  <span class="pl-k">return</span> [ newkey, val ]
})

<span class="pl-c">// =&gt; { f: &apos;Fred&apos;, b: &apos;Barney&apos;, w: &apos;Wilma&apos; }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/indexed_map&apos;)</code>.</p>
<h3 id="scour.filter">scour.filter</h3>
<blockquote>
<p><code>scour.filter(iterable, function(val, key), [isArray])</code></p>
</blockquote>
<p>Creates a new Array or Object with all elements that pass the test
implemented by the provided function.</p>
<p>Works like <a href="http://devdocs.io/javascript/global_objects/array/filter">Array#filter</a>, but will return an object if an object is also passed.</p>
<p>The optional <code>isArray</code> argument, when passed <code>true</code>, will always make this
return an <code>Array</code>. If <code>false</code>, it will always be an <code>Object</code>. Leave it
<code>undefined</code> for the default behavior.</p>
<p>This is also available as <code>require(&apos;scourjs/utilities/filter&apos;)</code>.</p>
<h3 id="scour.sortby">scour.sortBy</h3>
<blockquote>
<p><code>scour.sortBy(iterable, criteria)</code></p>
</blockquote>
<p>Sorts by a given criteria.</p>
<pre><code class="lang-js">list = [ { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Fred&apos;</span> }, { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Barney&apos;</span> }, { <span class="hljs-attr">name</span>: <span class="pl-s">&apos;Wilma&apos;</span> } ]
scour.sortBy(list, <span class="pl-s">&apos;name&apos;</span>)
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/sort_by&apos;)</code>.</p>
<!--api:end-->
<h2 id="thanks">Thanks</h2>
<p><strong>scour</strong> &#xA9; 2015+, Rico Sta. Cruz. Released under the <a href="http://mit-license.org/">MIT</a> License.<br>
Authored and maintained by Rico Sta. Cruz with help from contributors (<a href="http://github.com/rstacruz/scour/contributors">list</a>).</p>
<blockquote>
<p><a href="http://ricostacruz.com">ricostacruz.com</a> &#xA0;&#xB7;&#xA0;
GitHub <a href="https://github.com/rstacruz">@rstacruz</a> &#xA0;&#xB7;&#xA0;
Twitter <a href="https://twitter.com/rstacruz">@rstacruz</a></p>
</blockquote>

        </div>
        <div class="footer-nav">
          <div class="right"><a href="HISTORY.html"><span class="label">Next: </span><span class="title">Changelog</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>